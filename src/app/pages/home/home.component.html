<header id="header" class="header d-flex align-items-center sticky-top">
  <div class="container-fluid container-xl position-relative d-flex align-items-center justify-content-between">

    <a [routerLink]="['/home']" class="logo d-flex align-items-center">
      <img src="assets/img/logo.png" alt="M√£os que Curam">
      <h1 class="sitename"><span>M√£os que Curam</span></h1>
    </a>

    <nav id="navmenu" class="navmenu">
      <ul>
        <li><a href="#about" class="active">In√≠cio</a></li>
        <li><a (click)="scrollTo('about')">Sobre</a></li>
        <li><a (click)="scrollTo('services')">Servi√ßos</a></li>
        <li><a (click)="scrollTo('features')">Recursos</a></li>
        <li><a (click)="scrollTo('pricing')">Pre√ßos</a></li>
        <li class="dropdown">
          <a href="#"><span>Conta</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
          <ul>
            <!-- S√≥ exibe se h√° usu√°rio logado -->
            <li if="${user != null}">
              <a [routerLink]="['/profile']">Perfil</a>
            </li>
            <li if="${user != null and user.role == 'CLIENTE'}">
              <a [routerLink]="['/appointments']">Agendamentos</a>
            </li>
            <li if="${user != null and user.role == 'ADMIN'}">
              <a [routerLink]="['/admin']">P√°gina de administra√ß√£o</a>
            </li>
            <li if="${user != null}">
              <a href="/logout">Sair</a>
            </li>

            <!-- Se n√£o estiver logado, exibe login -->
            <li if="${user == null}">
              <a [routerLink]="['/logar']">Entrar</a>
            </li>
            <li if="${user == null}">
              <a [routerLink]="['/registrar']">Criar Conta</a>
            </li>
          </ul>
        </li>
        <li><a (click)="abrirModal()">Agendar</a></li>

        <!-- Modal de Agendamento -->
        <div id="agendamentoModal" class="agendamento-modal" style="display:none;">
          <div class="agendamento-content">
            <span class="fechar-modal" (click)="fecharModal()">&times;</span>
            <h2>Agendar Sess√£o</h2>

            <label for="servico">Servi√ßo</label>
            <select id="servico">
              <option value="">Selecione</option>
              <option value="Massagem Relaxante">Massagem Relaxante</option>
              <option value="Massagem Terap√™utica">Massagem Terap√™utica</option>
              <option value="Drenagem Linf√°tica">Drenagem Linf√°tica</option>
            </select>

            <label for="profissional">Profissional</label>
            <select id="profissional">
              <option value="">Selecione</option>
              <!-- op√ß√µes v√™m do back-end -->
            </select>

            <label for="data">Data</label>
            <input type="date" id="data">

            <label for="hora">Hor√°rio</label>
            <select id="hora">
              <option value="">Selecione</option>
              <option value="08:00">08:00</option>
              <option value="09:00">09:00</option>
              <option value="10:00">10:00</option>
              <option value="11:00">11:00</option>
              <option value="12:00">12:00</option>
            </select>

            <button id="agendarBtn">Confirmar Agendamento</button>

            <div id="resumo" class="resumo" style="display:none;"></div>
          </div>
        </div>
      </ul>
      <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
    </nav>

  </div>
</header>


<!-- About Section -->
<section id="about" class="about section">

  <div class="container">

    <div class="row gy-4">

      <div class="col-lg-6 content" data-aos="fade-up" data-aos-delay="100">
        <p class="who-we-are">Quem somos n√≥s</p>
        <h3> Voc√™ pode escolher conforme o tom que deseja (profissional, acolhedor ou inspirador)</h3>
        <p class="fst-italic">

        </p>
        <ul>
          <li><i class="bi bi-check-circle"></i> <span>Cuidar de voc√™ √© nossa maior miss√£o.</span></li>
          <li><i class="bi bi-check-circle"></i> <span>Cada toque √© pensado para transformar o seu dia.</span></li>
          <li><i class="bi bi-check-circle"></i> <span>Aqui, corpo e mente encontram equil√≠brio e harmonia.</span>
          </li>
        </ul>
      </div>

      <div class="col-lg-6 about-images" data-aos="fade-up" data-aos-delay="200">
        <div class="row gy-4">
          <div class="col-lg-6">
            <img src="assets/img/about-company-1.jpg" class="img-fluid" alt="">
          </div>
          <div class="col-lg-6">
            <div class="row gy-4">
              <div class="col-lg-12">
                <img src="assets/img/about-company-2.jpg" class="img-fluid" alt="">
              </div>
              <div class="col-lg-12">
                <img src="assets/img/about-company-3.jpg" class="img-fluid" alt="">
              </div>
            </div>
          </div>
        </div>

      </div>

    </div>

  </div>
</section><!-- /About Section -->

<!-- Services Section -->
<section id="services" class="services section">

  <!-- Section Title -->
  <div class="container section-title" data-aos="fade-up">
    <h2>Servi√ßos</h2>
    <div><span>Veja nossos</span> <span class="description-title">Servi√ßos</span></div>
  </div><!-- End Section Title -->

  <div class="container">

    <div class="row gy-4">

      <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="100">
        <div class="service-item  position-relative">
          <div class="icon">
            <i class="bi bi-emoji-laughing-fill"></i>
          </div>
          <a href="service-details.html" class="stretched-link">
            <h3>Massagem Relaxante</h3>
          </a>
          <p>Alivia o estresse, reduz a tens√£o muscular e promove bem-estar.</p>
        </div>
      </div><!-- End Service Item -->

      <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="200">
        <div class="service-item position-relative">
          <div class="icon">
            <i class="bi bi-clipboard2-heart-fill"></i>
          </div>
          <a href="service-details.html" class="stretched-link">
            <h3>Massagem Terap√™utica</h3>
          </a>
          <p>Ajuda em casos de dores cr√¥nicas, m√° postura ou esfor√ßo repetitivo.</p>
        </div>
      </div><!-- End Service Item -->

      <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="300">
        <div class="service-item position-relative">
          <div class="icon">
            <i class="bi bi-droplet-half"></i>
          </div>
          <a href="service-details.html" class="stretched-link">
            <h3>Drenagem Linf√°tica</h3>
          </a>
          <p>Estimula o sistema linf√°tico, reduz incha√ßos e reten√ß√£o de l√≠quidos.</p>
        </div>
      </div><!-- End Service Item -->

      <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="400">
        <div class="service-item position-relative">
          <div class="icon">
            <i class="bi bi-hand-index-thumb"></i>
          </div>
          <a href="service-details.html" class="stretched-link">
            <h3> Massagem Modeladora</h3>
          </a>
          <p>Visa ativar a circula√ß√£o e ajudar na redu√ß√£o de medidas.</p>
          <a href="service-details.html" class="stretched-link"></a>
        </div>
      </div><!-- End Service Item -->

      <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="500">
        <div class="service-item position-relative">
          <div class="icon">
            <i class="bi bi-feather"></i>
          </div>
          <a href="service-details.html" class="stretched-link">
            <h3>Shiatsu</h3>
          </a>
          <p>Equilibra a energia vital e alivia dores.</p>
          <a href="service-details.html" class="stretched-link"></a>
        </div>
      </div><!-- End Service Item -->

      <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="600">
        <div class="service-item position-relative">
          <div class="icon">
            <i class="bi bi-fire"></i>
          </div>
          <a href="service-details.html" class="stretched-link">
            <h3>Massagem com Pedras Quentes</h3>
          </a>
          <p>Pedras aquecidas usadas para relaxar m√∫sculos, aliviar tens√µes e aumentar o bem-estar.</p>
          <a href="service-details.html" class="stretched-link"></a>
        </div>
      </div><!-- End Service Item -->

    </div>

  </div>

</section><!-- /Services Section -->

<!-- Features Section -->
<section id="features" class="features section light-background">

  <!-- Section Title -->
  <div class="container section-title" data-aos="fade-up">
    <h2>Recursos</h2>
    <div><span>Diferenciais</span> <span class="description-title"></span></div>
  </div><!-- End Section Title -->

  <div class="container">

    <div class="row gy-5 justify-content-between">

      <div class="col-xl-5" data-aos="zoom-out" data-aos-delay="100">
        <img src="assets/img/services.jpg" class="img-fluid" alt="">
      </div>

      <div class="col-xl-6 d-flex">
        <div class="row align-self-center gy-4">

          <div class="col-md-6" data-aos="fade-up" data-aos-delay="200">
            <div class="feature-box d-flex align-items-center">
              <i class="bi bi-check"></i>
              <h3>üì± Agendamento Online</h3>
            </div>
          </div><!-- End Feature Item -->

          <div class="col-md-6" data-aos="fade-up" data-aos-delay="300">
            <div class="feature-box d-flex align-items-center">
              <i class="bi bi-check"></i>
              <h3>üï∞Ô∏è Atendimento com Hora Marcada</h3>
            </div>
          </div><!-- End Feature Item -->

          <div class="col-md-6" data-aos="fade-up" data-aos-delay="500">
            <div class="feature-box d-flex align-items-center">
              <i class="bi bi-check"></i>
              <h3>üßò Equil√≠brio Corpo e Mente</h3>
            </div>
          </div><!-- End Feature Item -->

          <div class="col-md-6" data-aos="fade-up" data-aos-delay="600">
            <div class="feature-box d-flex align-items-center">
              <i class="bi bi-check"></i>
              <h3>üéì Profissionais Qualificados</h3>
            </div>
          </div><!-- End Feature Item -->

          <div class="col-md-6" data-aos="fade-up" data-aos-delay="700">
            <div class="feature-box d-flex align-items-center">
              <i class="bi bi-check"></i>
              <h3>üíÜ‚Äç‚ôÇÔ∏è Variedade de T√©cnicas</h3>
            </div>
          </div><!-- End Feature Item -->

        </div>
      </div>

    </div>

  </div>

</section><!-- /Features Section -->

<!-- Pricing Section -->
<section id="pricing" class="pricing section">

  <!-- Section Title -->
  <div class="container section-title" data-aos="fade-up">
    <h2>Pre√ßos</h2>
    <div><span>Confira os </span> <span class="description-title">Pre√ßos</span></div>
  </div>
  <!-- End Section Title -->

  <div class="container" data-aos="fade-up">
    <div class="col-lg-3 col-md-6" data-aos="zoom-in" data-aos-delay="400">
      <div class="pricing-tem d-flex flex-column h-100">
        <h3 style="color: #0d6efd;">Se√ß√£o de 1 hora</h3>
        <div class="price"><sup>R$</sup>120,00<span></span></div>
        <div class="icon">
          <i class="bi bi-cash-stack" style="color: #0d6efd;"></i>
        </div>
        <ul class="flex-grow-1">
          <li>Sess√µes completas de 1 hora para voc√™ relaxar profundamente, aliviar tens√µes e renovar suas energias.
          </li>
        </ul>
        <a href="#contact" class="btn-buy mt-auto">Agende agora!</a>
      </div>
    </div>
    <!-- End Pricing Item -->
  </div>

</section><!-- /Pricing Section -->

<!-- Faq Section -->
<section id="faq" class="faq section light-background">

  <div class="container">

    <div class="row gy-4">

      <div class="col-lg-4" data-aos="fade-up" data-aos-delay="100">
        <div class="content px-xl-5">
          <h3><span>Perguntas frequentes sobre a </span><strong>Massoterapia</strong></h3>
          <p>

          </p>
        </div>
      </div>

      <div class="col-lg-8" data-aos="fade-up" data-aos-delay="200">

        <div class="faq-container">
          <div class="faq-item faq-active">
            <h3><span class="num">1.</span> <span>O que √© massoterapia?</span></h3>
            <div class="faq-content">
              <p>Massoterapia √© um conjunto de t√©cnicas de massagem que visam promover o bem-estar f√≠sico e mental,
                aliviando tens√µes, dores e estresse.</p>
            </div>
            <i class="faq-toggle bi bi-chevron-right"></i>
          </div><!-- End Faq item-->

          <div class="faq-item">
            <h3><span class="num">2.</span> <span> Qual a diferen√ßa entre massagem relaxante e terap√™utica?</span>
            </h3>
            <div class="faq-content">
              <p>A relaxante tem foco no al√≠vio do estresse e no relaxamento geral. J√° a terap√™utica √© mais profunda
                e indicada para dores musculares, tens√£o cr√¥nica ou problemas posturais.</p>
            </div>
            <i class="faq-toggle bi bi-chevron-right"></i>
          </div><!-- End Faq item-->

          <div class="faq-item">
            <h3><span class="num">3.</span> <span> Quantas sess√µes s√£o recomendadas?</span></h3>
            <div class="faq-content">
              <p>Depende do objetivo. Para relaxamento, uma sess√£o ocasional pode bastar. Para dores cr√¥nicas ou
                tratamentos espec√≠ficos, recomenda-se 1 a 2 sess√µes por semana.</p>
            </div>
            <i class="faq-toggle bi bi-chevron-right"></i>
          </div><!-- End Faq item-->

          <div class="faq-item">
            <h3><span class="num">4.</span> <span> Massagem d√≥i?</span></h3>
            <div class="faq-content">
              <p>A massagem relaxante n√£o d√≥i. J√° a terap√™utica pode causar algum desconforto em √°reas tensas, mas
                sempre respeitando os limites do cliente.</p>
            </div>
            <i class="faq-toggle bi bi-chevron-right"></i>
          </div><!-- End Faq item-->

        </div>

      </div>
    </div>

  </div>

</section><!-- /Faq Section -->

<script>
  // abre/fecha modal (use seus pr√≥prios bot√µes)
  const modal = document.getElementById('agendamentoModal');
  const fecharModal = document.querySelector('.fechar-modal');

  function abrirModal() {
    modal.style.display = 'block';
    carregarProfissionais(); // carrega a lista toda vez que abre
  }
  fecharModal.onclick = () => modal.style.display = 'none';

  // buscar profissionais no back-end
  async function carregarProfissionais() {
    try {
      const resp = await fetch('/professionals/api'); // endpoint JSON
      const profissionais = await resp.json();
      const select = document.getElementById('profissional');
      select.innerHTML = '<option value="">Selecione</option>';
      profissionais.forEach(p => {
        const opt = document.createElement('option');
        opt.value = p.id; // ou p.nome
        opt.textContent = p.nome; // ou `${p.nome} - ${p.especialidade}`
        select.appendChild(opt);
      });
    } catch (err) {
      console.error('Erro ao carregar profissionais', err);
    }
  }

  // a√ß√£o do bot√£o Confirmar
  document.getElementById('agendarBtn').addEventListener('click', () => {
    const servico = document.getElementById('servico').value;
    const profissional = document.getElementById('profissional').value;
    const data = document.getElementById('data').value;
    const hora = document.getElementById('hora').value;

    if (!servico || !profissional || !data || !hora) {
      alert('Preencha todos os campos!');
      return;
    }

    // Exibir resumo (ou enviar via fetch POST)
    const resumoDiv = document.getElementById('resumo');
    resumoDiv.style.display = 'block';
    resumoDiv.innerHTML = `
    <p><strong>Servi√ßo:</strong> ${servico}</p>
    <p><strong>Profissional:</strong> ${profissional}</p>
    <p><strong>Data:</strong> ${data}</p>
    <p><strong>Hor√°rio:</strong> ${hora}</p>
  `;

    // Exemplo de POST para o back-end (descomente/adapte):

    fetch('/agendamentos/save', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ servico, profissionalId: profissional, data, hora })
    })
      .then(resp => {
        if (resp.ok) alert('Agendamento salvo com sucesso!');
        else alert('Erro ao salvar agendamento');
      });

  });
</script>